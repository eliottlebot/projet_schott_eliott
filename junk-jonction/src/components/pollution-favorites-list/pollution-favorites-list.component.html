<div class="bg-[url(/jj-bg.webp)] h-full flex-1 bg-cover bg-center flex flex-col">
  <div class="flex justify-between p-5 bg-white/20 shadow-b-lg items-center backdrop-blur-xs">
    <h1
      class="font-zal text-5xl text-white font-semibold text-shadow-sm text-shadow-green-500 my-4"
    >
      Pollutions suivies
    </h1>
    <div class="flex justify-end gap-4 items-center">
      <app-favorite />
      <button
        class="rounded-full bg-slate-50 hover:bg-slate-100 border border-slate-200 px-4 py-2"
        (click)="sortByDate()"
      >
        Trier par date décroissante
      </button>
      <button
        class="rounded-full bg-slate-50 hover:bg-slate-100 border border-slate-200 px-4 py-2"
        (click)="resetSorting()"
      >
        Réinitialiser le tri
      </button>
    </div>
  </div>

  <!-- Scrollable list area -->
  @if (pollutionList$ | async; as pollutionList) {
    @if (pollutionList.length > 0) {
      <div class="flex-1 overflow-auto">
        <div class="m-2 grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
          @for (pollution of pollutionList; track $index) {
            <app-pollution-item
              [pollution]="pollution"
              (deletePollution)="deletePollution($event)"
              (showDetails)="showDetails($event)"
            ></app-pollution-item>
          }
        </div>
      </div>
    } @else {
      <div class="flex-1 flex items-center justify-center">
        <div class="bg-white/75 p-8 rounded-lg text-center">
          <lucide-icon [img]="Heart" class="w-16 h-16 mx-auto mb-4 text-gray-400"></lucide-icon>
          <h2 class="text-2xl font-semibold text-gray-700 mb-2">Aucun favori</h2>
          <p class="text-gray-600">Vous n'avez pas encore ajouté de pollution à vos favoris.</p>
        </div>
      </div>
    }
  } @else {
    <div class="h-full w-full flex items-center justify-center">
      <app-loader />
    </div>
  }
</div>
